package com.Rev.P1_Core._MonDexApp.Views;

import static com.Rev.P1_Core.AppUtils.*;

import com.Rev.P1_Core.Console.ConsoleUI;
import com.Rev.P1_Core.Console.UI.aConsoleView;
import com.Rev.P1_Core._MonDexApp.MonDirector;
import com.Rev.P1_Core._MonDexApp.Data._Creature;

public class NewCreatureForm extends aConsoleView {

	// ui to creating a new account for current user.

	private String type = ""+0;
	boolean dioT = false;

	private boolean selectedType = true;

	public NewCreatureForm(ConsoleUI manager) {
		super(manager);
	}

	@Override
	public void init() {
		super.init();

		this.options.put("*", "CREATURE TYPE");
		this.options.put(".", "-SUBMIT-");
	}

	// print to console
	@Override
	public void render() {

		

		super.render();

		Log(this.options.toString());
		Log("*" + type);
	}

	// handle incoming console input
	@Override
	public boolean handle(String inp) {

		if (!dioT) // no dialogs open?
			if (super.handle(inp))
				return true;
		if (dioT)
			this.type = inp.replaceAll("[^a-zA-Z]", " ");
		

		//setAcctType();
		if (inp.equals(".") || inp.equals("") || inp.equals(" ") || inp.equals("SUBMIT") || inp == null) {
			Log("TRY SUBMIT>");
			this.submit();
			return true;
		}
		
		if (inp.equals("*") || inp.equals("CREATURE TYPE")) {
			Log("ENTER CREATURE TYPE: ");
			this.dioT = true;
			return dioT;
		}

		return false;
	}

	//////
	//



	private void submit() {
		int userID = this.manager.Session.loggedAs.dbIndex();
		String type = this.type;

		_Creature creature = new _Creature(userID, type);

		MonDirector.Creatures.create(account);
		this.clear();
		account.clear();
		// this.input("^"); // casts the 'OUT' spell
		this.manager.Session.setView(new UserView(this.manager));
	}

}
